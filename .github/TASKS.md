# 314Sign — Task list for AI agents (issues & ideas)

This file lists concrete issues, bugs, and future ideas that an AI coding agent (Copilot) can pick from. Each item includes a short description, suggested files to inspect, and a quick verification step.

## Current status

(Recent completions have been applied; removed from this list to keep remaining tasks focused.)

## Remaining high-priority tasks


- Open draft GitHub issue for this item (recommended first step)
  - Title: "Convert remaining config.json writers to merge endpoint"
  - Files to reference: `.github/TASKS.md`, `scripts/merge-config.php`, `design/index.html`, `edit/index.html`, `setup-kiosk.sh`.

- Convert any remaining raw `PUT` callers to use `scripts/merge-config.php`
  - Why: prevents accidental destructive config writes.
  - Verify: search for `fetch('config.json'` and ensure callers use POST to `scripts/merge-config.php` or explicitly intend to replace config.

<!-- `scripts/deploy-check.sh` has been implemented and committed; no action required. -->

## Medium priority

- Add slideshow set schema validator (`scripts/validate-slideshow-set.php` or JS) and harden slideshow upload validations
- Add `rules/examples/` with test cases for midnight-span logic

## Documentation & onboarding

- Add a short `config.json` merge snippet to `.github/copilot-instructions.md` (below)
- Expand `docs/` with "Add editable file" checklist (WebDAV, `setup-kiosk.sh` include list, `permissions.sh` remediation)

---
How to proceed
- I can open draft issues for the three high-priority tasks and/or implement `deploy-check.sh` next — which would you like me to do?


## Ops / Deployment tasks

- Make `setup-kiosk.sh` include new editable files list explicit
  - Why: Adding editable files requires matching WebDAV/rsync config.
  - Files: `setup-kiosk.sh`, deployment docs in `docs/`.
  - Verify: Add a dummy editable file, run `setup-kiosk.sh`, confirm file is included in `/var/www/html`.

## UX / Editor correctness

- Add safe `config.json` merge helper and example
  - Why: Promote non-destructive updates by editors and future scripts.
  - Files: new helper (e.g., `scripts/merge-config.php` or JS), update `design/index.html` to call it.
  - Verify: Running helper merges keys and retains unknown fields.

- Improve `rules/index.html` midnight-span handling tests
  - Why: Schedules that span midnight are tricky; add unit-like checks or a playground page.
  - Files: `rules/index.html`, `rules.json` (example cases in `history/`).
  - Verify: Scheduler evaluates rules correctly at boundary times.

## Slideshows & Media

- Harden `slideshows/upload-media.php` validations
  - Why: Prevent malformed JSON uploads and ensure media cleanup.
  - Files: `slideshows/upload-media.php`, `slideshows/sets/*.json`.
  - Verify: Upload invalid metadata and observe graceful error + log entry.

- Add a slideshow set schema validator
  - Why: Keep sets consistent and prevent runtime errors on the kiosk.
  - Files: `slideshows/sets/example.json`, new validator script.
  - Verify: Validator flags missing fields and reports line numbers.

## Documentation & Onboarding

- Expand `docs/` with a short "Add editable file" checklist
  - Why: New contributors must update WebDAV, `setup-kiosk.sh` includes, and `permissions.sh` expectations.
  - Files: `docs/file_structure.md`, `docs/troubleshooting.md`.
  - Verify: Follow checklist to add a new editable menu or page.

- Add a `config.json` merge snippet to `.github/copilot-instructions.md`
  - Why: Quick reference for AI agents and contributors.
  - Files: `.github/copilot-instructions.md` (update), `scripts/` (optional helper).
  - Verify: Snippet demonstrates read→merge→write safely.

## Nice-to-have / Enhancements

- Small test harness that runs a local headless check of `index.html` JS behavior
  - Why: Automated smoke checks for polling and ETag behavior.
  - Files: new `scripts/smoke-check.js`, README snippet for usage.
  - Verify: Smoke check passes on `php -S localhost:8000`.

- Add explicit examples of `rules.json` cases in `rules/` for test-driven improvements
  - Why: Easier debugging and reproducible edge cases for schedule logic.
  - Files: `rules/examples/*.json` (new folder).
  - Verify: `index.html` picks up rule files when used in dev server.

---
How to use this list
- Pick an item, create an issue with the suggested title and files, and reference this file in the PR.
- If you want, I can open draft issues/PRs for top N items — tell me which ones to prioritize.

***
Generated by an AI coding agent to seed issues and future work for contributors.
